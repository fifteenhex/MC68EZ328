;
;
; mdisp
;
setbaud 9600
setecho 0
fileopen fhandle 'data.dat' 1

messagebox "Please, reset the board and press <OK>" "init"
send $13

wait '@'

inputbox 'hex-address' 'start'
sprintf '0x%s' inputstr
str2int intadrs inputstr

inputbox 'number-of-bytes' 'start'
str2int intcount inputstr

sprintf 'address %08X  bytes %d' intadrs intcount
messagebox inputstr 'mdisp'

for c 0 intcount
  m = c % 16
  if m=0 then
    sprintf '%08X ' intadrs
    filewrite fhandle #13#10
    filewrite fhandle inputstr
  endif

  sprintf 'FFFFFFAA082C7C%08X4E71' intadrs
  send inputstr 13
  waitn 26

  send 'FFFFFFAA00' 13
  waitn 10
 
  send 'FFFFFFAA082A7CFFFFF9074E71' 13
  waitn 26

  send 'FFFFFFAA00' 13
  waitn 10
 
  send 'FFFFFFAA081A964E714E714E71' 13
  waitn 26

  send 'FFFFFFAA00' 13
  waitn 10

  intadrs=intadrs+1

  waitn 1
  str2code val inputstr
  sprintf '%02X ' val
  filewrite fhandle inputstr
next
fileclose fhandle
